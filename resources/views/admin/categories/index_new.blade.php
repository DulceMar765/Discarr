{{-- resources/views/admin/categories/index.blade.php --}}\n\n<div class=\"admin-section\">\n    <h2 class=\"mb-4\"><i class=\"bi bi-tags-fill me-2\"></i> Gestión de Categorías</h2>\n\n    <a href=\"#\" onclick=\"loadAdminSection('/admin/categories/create'); return false;\" class=\"btn btn-primary mb-3\">Agregar Categoría</a>\n\n    @if(session('success'))\n        <div class=\"alert alert-success\">{{ session('success') }}</div>\n    @endif\n\n    @if($categories->isEmpty())\n        <div class=\"alert alert-info\">No hay categorías registradas. ¡Agrega la primera!</div>\n    @else\n        <div class=\"table-responsive\">\n            <table class=\"table table-striped align-middle\">\n                <thead class=\"table-light\">\n                    <tr>\n                        <th>ID</th>\n                        <th>Nombre</th>\n                        <th>Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    @foreach($categories as $category)\n                    <tr>\n                        <td>{{ $category->id }}</td>\n                        <td>{{ $category->name }}</td>\n                        <td>\n                            <a href=\"#\" onclick=\"loadAdminSection('/admin/categories/' + {{ $category->id }} + '/edit'); return false;\" class=\"btn btn-warning btn-sm\">Editar</a>\n                            <button type=\"button\" onclick=\"deleteCategory({{ $category->id }})\" class=\"btn btn-danger btn-sm\">Eliminar</button>\n                        </td>\n                    </tr>\n                    @endforeach\n                </tbody>\n            </table>\n        </div>\n    @endif\n</div>\n\n<script>\n    function deleteCategory(id) {\n        if (confirm('¿Estás seguro de eliminar esta categoría?')) {\n            fetch(`/admin/categories/${id}`, {\n                method: 'DELETE',\n                headers: {\n                    'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content'),\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json',\n                    'X-Requested-With': 'XMLHttpRequest'\n                }\n            })\n            .then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    // Recargar la sección de categorías\n                    loadAdminSection('/admin/categories');\n                } else {\n                    alert('Error al eliminar la categoría: ' + (data.message || 'Error desconocido'));\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                alert('Error al procesar la solicitud');\n            });\n        }\n    }\n</script>
